# Отчёт
--------------------------------------------------------------------------

## Численное вычисление многомерных интегралов методом Симпсона

Студент: Ашихмин Даниил  
Группа: 3823Б1ФИ2  

Технология: SEQ-MPI

--------------------------------------------------------------------------

## Введение
В данной работе реализуется алгоритм численного вычисления многомерных интегралов методом Симпсона. Рассматривается последовательная и параллельная (MPI) реализации. Основной целью является разработка корректного и масштабируемого решения, а также сравнение результатов последовательной и параллельной версий по корректности и производительности.

--------------------------------------------------------------------------

## Постановка задачи
Требуется вычислить значение определённого многомерного интеграла на прямоугольной области с использованием метода Симпсона.

Входные данные:

· Количество разбиений partitions по каждой размерности (чётное число)
· Вектор левых границ left_bounds и правых границ right_bounds (жёстко задаются для всех размерностей в коде)
· Функция Function(coordinates) - многомерная функция, значение которой требуется проинтегрировать

Выходные данные:

· Численное значение интеграла  

Требования:

· Корректная работа при любой размерности интеграла  
· Использование метода Симпсона  
· Поддержка параллельной реализации с применением MPI  
· Корректное воспроизведение результата в последовательной версии  

--------------------------------------------------------------------------

## Базовый алгоритм (последовательный)
Последовательная версия алгоритма выполняет следующие шаги:

· Формируется равномерная сетка по каждой размерности  
· Вычисляются шаги интегрирования  
· Для каждой точки сетки вычисляется значение подынтегральной функции  
· К значению функции применяется вес, соответствующий методу Симпсона  
· Производится суммирование всех взвешенных значений  
· Итоговый результат умножается на коэффициент, зависящий от шагов интегрирования  

--------------------------------------------------------------------------

## Схема распараллеливания (MPI)
Параллельная версия использует разбиение вычислений по процессам.

Распределение данных:

· Полный диапазон индексов сетки по первому измерению разбивается между процессами
· Каждый процесс обрабатывает свой поддиапазон точек, используя ComputeLocalSum
· Локальные суммы объединяются через MPI_Reduce, итоговое значение рассылается всем процессам через MPI_Bcast 

Схема взаимодействия процессов:

· Используются только MPI_Comm_rank, MPI_Comm_size, MPI_Reduce и MPI_Bcast

--------------------------------------------------------------------------

## Детали реализации
Структура кода:

· common.hpp - общие структуры данных и вспомогательные функции  
· ops_seq.hpp / ops_seq.cpp - последовательная реализация метода Симпсона  
· ops_mpi.hpp / ops_mpi.cpp - параллельная MPI-реализация  
· tests/functional/main.cpp - функциональные тесты  
· tests/performance/main.cpp - тесты производительности  

Особенности реализации:

· Корректная работа с произвольной размерностью интеграла
· Проверка корректности входных параметров
· Аккуратная работа с индексами сетки и распределением точек между процессами
· Локальная сумма рассчитывается только по точкам, назначенным текущему процессу

Основные вспомогательные функции:

· Генерация координат точки по индексам  
· Вычисление веса точки по методу Симпсона  
· Преобразование индексов в линейный диапазон  

--------------------------------------------------------------------------

## Экспериментальная установка
Аппаратное обеспечение:

· CPU - AMD Ryzen 5 3500X (3.6 - 4.1 GHz, 6 ядер)  
· RAM - 16 ГБ  

Программное обеспечение:

· OS - Windows 11 Pro x64  
· MPI - Microsoft MPI 10.1.1  
· Компилятор - MSVC 19.x  
· Система сборки - CMake  
· Конфигурация - Release  

Параметры запуска:

· PPC_NUM_PROC = 4  
· PPC_NUM_THREADS = 1  

--------------------------------------------------------------------------

## Результаты и обсуждение

## Проверка корректности
Функциональные тесты проверяют:

· Корректность вычисления интеграла в последовательной версии  
· Совпадение результатов последовательной и MPI-версий  
· Корректную работу при различных размерностях  

Результаты:

· Все функциональные тесты пройдены успешно  
· Полученные значения совпадают в пределах допустимой погрешности  

## Производительность

Результаты тестов производительности метода Симпсона представлены в таблице:
| Mode   | Count | Time (s) | Speed-up | Efficiency |
|--------|-------|----------|----------|------------|
| seq    | 1     | 0.0103   | 1.00     | 100%       |
| mpi    | 2     | 0.0060   | 1.72     | 86%        |
| mpi    | 4     | 0.0038   | 2.71     | 68%        |

Тесты производительности показывают:

· Ускорение вычислений при увеличении числа процессов  
· Корректную масштабируемость алгоритма  
· Отсутствие деградации производительности на малых размерностях  

--------------------------------------------------------------------------

## Заключение
В ходе выполнения работы был реализован алгоритм численного вычисления многомерных интегралов методом Симпсона в последовательном и параллельном вариантах.

Достигнутые результаты:

· Реализован корректный алгоритм метода Симпсона  
· Создана MPI-версия с распределением вычислений по процессам  
· Подтверждена корректность результатов с помощью тестирования  
· Проведён анализ производительности  

--------------------------------------------------------------------------

## References
· MPI Standard - https://www.mpi-forum.org/docs/  
· Microsoft MPI Documentation - https://learn.microsoft.com/message-passing-interface  
· cppreference.com - https://en.cppreference.com