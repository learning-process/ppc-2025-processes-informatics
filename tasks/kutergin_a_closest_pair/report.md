# Нахождение наиболее близких соседних элементов вектора

- Student: Кутергин Антон Андреевич, group 3823Б1ФИ1
- Technology: SEQ | MPI 
- Variant: 7

## 1 Введение

Нужно было реализовать параллельный и последовательный алгоритм для поиска наиболее близких соседних элементов вектора

## 2 Постановка задачи

На вход подается вектор v, нужно найти такой индекс i, что велечина |v[i] - v[i+1]| минимальна среди всех пар элемента

## 3. Baseline Algorithm (Sequential)

Последовательно просматривает пары v[i], v[i+1], сравнивает разности и возвращает индекс максимума

## 4. Parallelization Scheme

Вектор разбивается на MPI процессы, корректно обрабатывая границы между процессами, чтобы последнему числу этого процесса и первому следующего процесса также образуют пару. Каждый ищет свой локальный минимум среди всех своих соседних пар. Возвращаем глобальный индекс пары с помощью MPI_Reduce

## 6. Experimental Setup

-HARDWARE/OS: CPU - Intel Core i5-8300H, cores/threads - 4/8, RAM - 12gb, OS - Windows 10
TOOLCHAIN: g++ 13.3.0, build type - Release


## 7. Results and Discussion

### 7.1 Correctness

Функциональные тесты: вектор может принимать как положительные, так и отрицательные значения или содержать и положительные и отрицательные значения, так же обрабатывается случай, когда вектор пуст или у него одно значение и пару ему не найти.
MPI версия запускалась на 4 ядрах - эталонное ускорение в 4 раза.
Тест на производительность: генерация n чисел и запуск алгоритмов, чтобы узнать время выполнения.

### 7.2 Performance

| Размер данных |Кол-во процессов| MPI версия (сек)       | SEQ версия (сек)        |
|---------------|----------------|------------------------|-------------------------|
| 100,000,000   |       2        | 0.1726183200           | 0.2780640800            |
| 100,000,000   |       4        | 0.1601058600           | 0.3270964400            |
| 100,000,000   |       8        | 0.1926481400           | 0.3761903000            |


## 8. Conclusions

Я перешёл с Docker на чистый Windows, и MPI версия стала быстрее SEQ. Возможно это связано с тем, что Docker потреблял много ресурсов процессора и это сказывалось на результатах, а также возможно повлияло то, что linux компилятор лучше оптимизирован. Время выполнения SEQ версии колебается, но я думаю это из-за фоновых процессов windows, которые влияют на результат, но впринцепе время не особо сильно отличается. Время MPI версии при 8 процессах больше чем другие, скорее всего это связано с тем, что у меня 4 физических ядра и на каждое ядро приходится 2 процесса, что привело к снижению эффективности из-за переключений между процессами. Вывод: MPI версия оказалась быстрее SEQ на OS Windows, хоть и не особо сильно, возможно ускорение будет больше если взять больше данных и больше ядер с процессами.

## 9. References
1.Лекции по параллельному программированию
2.Практические занятия по параллельному программированию