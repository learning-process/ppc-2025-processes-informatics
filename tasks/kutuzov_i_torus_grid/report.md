# Решетка-тор

- Student: Кутузов Иван Арсеньевич, group 3823Б1ФИ3
- Technology: SEQ | MPI 
- Variant: 9

## 1. Introduction

Мотивация: Изучение параллельной маршрутизации сообщений в топологии "тор" с использованием MPI.

Проблема: В тороидальных распределённых системах требуется эффективно определять маршруты передачи сообщений с учётом циклических связей между узлами.

Ожидаемый результат: MPI-реализация алгоритма должна корректно обеспечивать передачу сообщений между любыми узлами топологии "тор", при возможных накладных расходах на коммуникацию.

## 2. Problem Statement

На вход подаются:
* Номер процесса-отправителя;
* Номер процесса-получателя;
* Строка сообщения;

Задача: Передать сообщение от отправителя к получателю через промежуточные узлы в топологии "тор", сформировав корректный и оптимальный маршрут.

## 3. Baseline Algorithm (Sequential)
SEQ-версия реализована в виде заглушки и не выполняет реальной маршрутизации, так как последовательный вариант не применим для задачи распределённой маршрутизации. Используется исключительно для прохождения CI.

## 4. Parallelization Scheme
Параллельный алгоритм реализован с использованием MPI и моделирует маршрутизацию в двумерной тороидальной сетке. Каждый процесс определяет свои координаты и соседей с учётом циклических границ. Процесс-отправитель пошагово выбирает направление к получателю, ориентируясь на кратчайшее расстояние, и передаёт сообщение соседним процессам с помощью `MPI_Send` и `MPI_Recv`. Маршрут формируется по мере передачи сообщения. После получения сообщения конечный процесс рассылает итоговый маршрут и данные всем процессам с использованием `MPI_Bcast`. Обрабатываются граничные случаи, включая совпадение отправителя и получателя и работу с одним процессом.

## 5. Experimental Setup
* Hardware/OS: 14th gen Intel(R) Core(TM) i5-14600KF, 14 ядер (6P+8E ядер), 32 GB RAM, Windows 11 x64
* Toolchain: compiler, version, build type (Release/RelWithDebInfo)
    * Cmake 3.28.3
    * Компилятор: g++ (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0
    * Использовался Docker-контейнер.
    * Режим сборки: Release.
* Data: Вектор длиной 50 000 000.

## 6. Results and Discussion
### 6.1 Correctness
Корректность проверена набором функциональных тестов, включая:
* Отправку сообщения самому себе;
* Передачу соседним процессам;
* Передачу через циклические границы тора;
* Работу при количестве процессов от 1 до 4;

Все тесты успешно пройдены.

### 6.2 Performance
Анализ производительности не проводился, поскольку SEQ-версия является заглушкой, а тесты выполняются на малом числе процессов, что не позволяет корректно оценить масштабируемость.

## 7. Conclusions
Реализованный MPI-алгоритм маршрутизации в топологии "тор" корректно обрабатывает основные сценарии передачи сообщений, включая граничные случаи и циклические переходы. Ограничением работы является отсутствие анализа масштабируемости из-за условий тестовой среды.

## 8. References
* "Параллельное программирование для кластерных систем" ННГУ им. Лобачевского, ИИТММ.