# Подсчет частоты символа в строке

- Student: Поташник Максим Ярославович, group 3823Б1ФИ3
- Technology: SEQ | MPI
- Variant: 8

## 1. Introduction

Топология "Звезда" представляет собой способ обмена данными между процессами, когда выбирается один центральный процесс, и все перессылки данных происходят через него.

В лабораторной работе было реализовано взаимодействие между процессами, имитирующее взаимодействие при топологии "Звезда".
Для SEQ-версии и случая с world_rank=1 реализована заглушка, т.к. задание не предполагает наличие реализации для таких случаев. 

## 2. Problem statement

Нужно реализовать взаимодействие между процессами, имитирующее взаимодействие при топологии "Звезда":

Реализована программа, в которой выполняется множество запросов вида:
1. Процесс-отправитель отправляет данные на центральный процесс
2. Центральный процесс принимает данные, после чего отправляет их процессу-получателю
3. Процесс получатель принимает данные от центрального процесса

В случае, если программа запускается на одном процессе, или запускается SEQ-версия программы, запускается код-заглушка, необходимый для прохождения CI-тестов.

### Входные данные:
Вектор целых чисел - множество данных, которые будут рассылаться между процессами.

### Выходные данные:
Одно целое неотрицательное число - сумма всех пересланных данных.

### 3. Baseline Algorithm (Sequential)
В качестве SEQ-версии программы реализована заглушка для прохождения CI-тестов.

### 4. Parallelization Scheme
Имеется вектор рассылаемых данных. Для каждого набора данных определяются два процесса, между которыми будет организованно взаимодействие:

```
inline std::pair<int, int> GetCyclicSrcDst(int world_size, int iter) {
  int num_other_processes = world_size - 1;
  int src = (iter % num_other_processes) + 1;
  int dst = ((iter + 1) % num_other_processes) + 1;
  return {src, dst};
}
```

Если процесс не является центральным, а также не выбран в качестве отправителя/получателя для текущего набора данных, то он ничего не делает.
Процесс-отправитель отправляет данные на центральный процесс с помощью MPI_Send.
Процесс-получатель принимает данные с центрального процесса с помощью MPI_Recv.
Центральный процесс принимает данные с процесса-отправителя и отправляет их процессу-получателю.

После того, как для всех данных была совершена перессылка, подсчитывается сумма всех пересланных данных со всех процессов для проверки корректности выполнения работы. 

### 5. Experimental Setup
- Hardware/OS: 12th gen Intel(R) Core(TM) i5-12450H, 8 ядер, 16 GB RAM, Windows 11 x64
- Toolchain: compiler, version, build type (Release/RelWithDebInfo)
    - Cmake 3.28.3
    - Компилятор: g++ (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0
    - Использовался Docker-контейнер.
    - Режим сборки: Release.
- Data: Для замера производительности использовался вектор из целочисленных значений, генерируемых детерминированно. 

## 6. Results and Discussion

### 6.1 Correctness
Корректность работы проверена с помощью тестов Google Test на строках размерами: 1, 5, 10, 20, 100.

### 6.2 Performance
| Mode        | Count | Time, s | Speedup | Efficiency |
|-------------|-------|---------|---------|------------|
| seq         | 1     | 0.039   | 1.00    | N/A        |
| mpi         | 2     | 0.025   | 1.56    | 78.0%      |
| mpi         | 4     | 0.013   | 3.00    | 75.0%      |

## 7. Conclusions
Эффективность выполнения работы для задания вида "Топология Звезда" нельзя интерпретировать, т.к. задание предполагает не параллелизацию алгоритма, а реализацию взаимодействия между процессами на основе топологии звезда.

## 8. References
1. "Параллельное программирование для кластерных систем" ННГУ им. Лобачевского, ИИТММ